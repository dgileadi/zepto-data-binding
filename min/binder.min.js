$(document).ready(function(){$(document.body).binder()}),function($){var nextId=0,inited=!1,settings=null,bindings={},methods={options:function(t){settings=$.extend({bindAttributes:["bind-checked","bind-class","bind-disabled","bind-readonly","bind-selected","bind-src","bind-style"],separatorSymbol:",",decimalSymbol:".",currencySymbol:"$"},t)},init:function(t){inited||(inited=!0,$(document.body).binder("options",{})),$("[bind]",this).each(function(){$(this).binder("bind",$(this).attr("bind"),t)}),$("[data-bind]",this).each(function(){$(this).binder("bind",$(this).data("bind"),t)});for(var e=0;e<settings.bindAttributes.length;e++){var n=settings.bindAttributes[e];$("["+n+"]",this).each(function(){$(this).binder("bind",$(this).attr(n),t,n.slice(5))}),$("[data-"+n+"]",this).each(function(){$(this).binder("bind",$(this).data(n),t,n.slice(5))})}$("[repeat]",this).each(function(){$(this).binder("repeat",$(this).attr("repeat"),t)}),$("[data-repeat]",this).each(function(){$(this).binder("repeat",$(this).data("repeat"),t)})},bind:function(t,e,n){t&&$(this).each(function(){var r=$(this).is("input")||$(this).is("select")||$(this).is("textarea");if(r){var i=function(){binder.sync()};($(this).attr("immediate")||$(this).data("immediate"))&&$(this).on("keyup",i),$(this).on("change",i)}$(this).attr("id")||$(this).attr("id","_binder_id_"+nextId++);var s,a=parseGetter(t),o=r?parseSetter(t):null,l="#"+$(this).attr("id");o&&(s=n?function(){return $(l).prop(n)}:function(){return $(l).val()});var u;u=n?function(t){if("boolean"==typeof t)$(l).prop(n,t);else if("class"==n){var e=$(l).data("zdb-class");e&&t!=e&&$(l).removeClass(e),t&&t!=e&&($(l).hasClass(t)||$(l).addClass(t)),$(l).data("zdb-class",t)}else $(l).attr(n,t)}:r?function(t){$(l).val(t)}:function(t){$(l).text(t)},createBinding(l,a,o,s,u,e)})},unbind:function(){return $(this).each(function(){var t="#"+$(this).attr("id");delete bindings[t]}),this},repeat:function(t,e){if(t){var n=t.split(/\s*\bin\b\s*/i);if(2==n.length){var r=n[0].split(/\s*,\s*/),i=1==r.length?null:r[0],s=1==r.length?r[0]:r[1],a=function(t,e,n,r){t.first=e,t.middle=!e,t.last=!1,t[s]=n[r],i&&(t[i]=r)};$(this).each(function(){var t=$(this);t.attr("id")||t.attr("id","_binder_id_"+nextId++);var r=t.attr("id");t.hide(),$("[id]",t).binder("unbind");var i=parseGetter(n[1]),s=createBinding("#"+r,i,null,null,function(){},e);s.domSetter=function(n){var i=$("[data-"+r+"_clone]",t.parent());if(n){var s,o=t,l=!0;for(var u in n)if(Object.prototype.hasOwnProperty.call(n,u)){var d=r+"_clone_"+u,c=$("#"+d);if(c.length){i=i.not(c),s=findBindings($("[id]",c));for(var f=0;f<s.length;f++)a(s[f].scope,l,n,u)}else{var h=createScope(e);s=[h],h.index=u,a(h,l,n,u),c=t.clone(),c.insertAfter(o),c.removeAttr("repeat").removeAttr("data-repeat"),c.attr("id",d),c.attr("data-"+r+"_clone",!0),suffixIds(c,"_clone_"+u),c.binder("init",h),c.show()}l=!1,o=c}for(var f=0;f<s.length;f++)s[f].middle=!1,s[f].last=!0}i.trigger("removerepeat"),$("[id]",i).binder("unbind"),i.remove()},s.value=null,s.sync()})}}}};$.fn.binder=function(t){if(methods[t])return methods[t].apply(this,Array.prototype.slice.call(arguments,1));if("object"!=typeof t&&t)throw"Method "+t+" does not exist";return methods.init.apply(this,arguments)},safeArgs=function(t){for(var e,n=0,r="",i=/"([^\\"]|\\.)*"|'([^\\']|\\.)*'/g;null!=(e=i.exec(t));)e.index>n&&(r+=safeArg(t.substring(n,e.index))),r+=e[0],n=i.lastIndex;return n<t.length&&(r+=safeArg(t.substring(n))),r},safeArg=function(t){var e,n=t;do e=n,n=e.replace(/([\w\.\(\)\{\}\|]*\b(?![\d])\w+)\./,"($1||{}).");while(n!=e);return e.replace(/(^|\s|\()((?!\d|false|true|this|null|undefined)\w+)/gi,"$1scope.$2")},parseGetter=function(expression){for(var filters=expression.split(/\s*\|\s*/g),result=safeArgs(filters[0]),i=1;i<filters.length;i++){var args=filters[i].split(/\s*:\s*/g);result="binder.filters."+args[0]+"("+result;for(var j=1;j<args.length;j++)result+=", "+safeArgs(args[j]);result+=")"}return function(scope){return eval(result)}},parseSetter=function(expression){var r=/['"|+\-*/%<>&\^=~!]|\b(\d+|false|true|null|undefined)\b/i;if(r.test(expression))return null;var parts=expression.split(/\./g);return function(scope,value){if(parts&&parts.length>1){for(var parent=scope,i=0;i<parts.length;i++)parent[parts[i]]||(parent[parts[i]]=i<parts.length-1?{}:""),parent=parent[parts[i]];parts=null}eval("scope."+expression+" = value")}},createBinding=function(t,e,n,r,i,s){s||(s=binder.scope);var a={id:t,scope:s,domGetter:r,modelGetter:e,domSetter:i,modelSetter:n,sync:function(){var t,e=this.modelGetter(this.scope);if(compareObjects(e,this.value)){if(!this.domGetter)return!1;var n=this.domGetter();if(n==this.value)return!1;this.value=n,t="model"}else this.value=e,t="dom";return"dom"===t?this.domSetter(this.value):this.modelSetter&&"model"===t&&this.modelSetter(this.scope,this.value),null!=t},isDirty:function(){return this.modelGetter(this.scope)!=this.value||this.domGetter&&this.domGetter()!=this.value}};return a.sync(),bindings[t]||(bindings[t]=[]),bindings[t].push(a),a},findBindings=function(t){var e=[];return $(t).each(function(){var t="#"+$(this).attr("id");bindings[t]&&(e=e.concat(bindings[t]))}),e},compareObjects=function(t,e){if(t==e)return!0;if(null==t||null==e)return!1;if("object"==typeof t&&"object"==typeof e){if(t.length&&e.length&&t.length!=e.length)return!1;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&t[n]!=e[n])return!1;return!0}return!1},suffixIds=function(t,e){t.children().each(function(){var n=$(this).attr("id");n&&($(this).attr("id",n+e),$('[for="'+n+'"]',t).attr("for",n+e)),suffixIds($(this),e)})},filter=function(t,e){if(!t||!e)return t;var n;return n="function"==typeof e?e:"string"==typeof e?function(t){if("string"==typeof t)return-1!=t.indexOf(e);for(var n in t)if(-1!=(t[n]+"").indexOf(e))return!0;return!1}:function(t){for(var n in e)if("$"===n){var r=!1;for(var i in t)if(-1!=(t[i]+"").indexOf(e[n])){r=!0;break}if(!r)return!1}else{if(null==t[n])return!1;if(-1==(t[n]+"").indexOf(e[n]+""))return!1}return!0},t.filter(n)},orderBy=function(t,e,n){if(!t||!e)return t;var r=[];e=[].concat(e);for(var i=function(t,e){var r;return r=isNaN(t)||isNaN(e)?t>e?1:-1:t-e,n?-r:r},s=0;s<e.length;s++){var a=e[s];if("function"==typeof a)r.push({func:a,f:function(t,e){return i(this.func(t),this.func(e))}});else if("string"==typeof a){var o="-"==a.charAt(0),l=a.replace(/^[+\-]\s*/,"");r.push({prop:l,f:function(t,e){var n=i(t[this.prop],e[this.prop]);return o?-n:n}})}}var u=t.slice(0);return u.sort(function(t,e){for(var n=0;n<r.length;n++){var i=r[n].f(t,e);if(0!=i)return i}return 0}),u},limitTo=function(t,e,n){return t&&t.length&&(n&&(n>0&&n<t.length?t=t.slice(n):0>n&&-n<t.length&&(t=t.slice(0,t.length+n))),e>0&&e<t.length?t=t.slice(0,e):0>e&&-e<t.length&&(t=t.slice(t.length+e))),t},number=function(t,e,n,r){if(!t)return t;null==n&&(n=settings.separatorSymbol),null==r&&(r=settings.decimalSymbol),t+="";var i=t.indexOf(".");if(-1===i?(i=t.length,e&&(t+=r)):"."!=r&&(t=t.slice(0,i)+r+t.slice(i+1)),e)if(i+e+1<t.length)t=t.slice(0,i+1+e);else for(;i+e+1>t.length;)t+="0";for(i-=3;i>0;)t=t.slice(0,i)+n+t.slice(i),i-=3;return t},currency=function(t,e,n,r,i){return(e||settings.currencySymbol)+number(t,n||2,r,i)},date=function(t,e){return window.dateFormat?dateFormat(t,e):t},json=function(t){return JSON.stringify(t)},lowercase=function(t){return t?t.toLowerCase():t},uppercase=function(t){return t?t.toUpperCase():t},createScope=function(t){return void 0===t&&(t=binder.scope),Object.create(t)},window.binder={scope:{window:window},filters:{currency:currency,date:date,filter:filter,json:json,limitTo:limitTo,lowercase:lowercase,number:number,orderBy:orderBy,uppercase:uppercase},sync:function(){for(var t=0;10>t;t++){var e=!1;for(var n in bindings)for(var r=bindings[n],i=0;i<r.length;i++)e|=r[i].sync();if(!e)break}}}}(Zepto);